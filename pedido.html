<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pedido de Orçamento - JurisFlow</title>
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Estilos específicos para a página de pedido */
        .pedido-header {
            background: linear-gradient(135deg, #3498db 0%, #2c3e50 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
            border-radius: 0 0 10px 10px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }
        
        .pedido-header::before {
            content: '';
            position: absolute;
            top: -50px;
            right: -50px;
            width: 200px;
            height: 200px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
        }
        
        .pedido-header h1 {
            font-size: 36px;
            margin-bottom: 10px;
            position: relative;
            z-index: 2;
        }
        
        .pedido-header p {
            font-size: 18px;
            opacity: 0.9;
            max-width: 700px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }
        
        .progress-steps {
            display: flex;
            justify-content: space-between;
            margin: 40px auto;
            max-width: 800px;
            position: relative;
            counter-reset: step;
        }
        
        .progress-steps .progress-line {
            position: absolute;
            top: 25px;
            left: 0;
            right: 0;
            height: 3px;
            background: #e0e0e0;
            z-index: 1;
        }
        
        .progress-steps .progress-fill {
            position: absolute;
            top: 25px;
            left: 0;
            width: 0%;
            height: 3px;
            background: #3498db;
            z-index: 2;
            transition: width 0.5s ease;
        }
        
        .step {
            text-align: center;
            position: relative;
            z-index: 3;
            flex: 1;
        }
        
        .step-number {
            width: 50px;
            height: 50px;
            background: #e0e0e0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-weight: bold;
            font-size: 20px;
            color: #666;
            transition: all 0.3s;
        }
        
        .step.active .step-number {
            background: #3498db;
            color: white;
            transform: scale(1.1);
            box-shadow: 0 0 0 10px rgba(52, 152, 219, 0.1);
        }
        
        .step-label {
            font-weight: 600;
            color: #666;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .step.active .step-label {
            color: #3498db;
        }
        
        .form-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 40px;
        }
        
        .section-title {
            font-size: 24px;
            color: #2c3e50;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .form-section {
            margin-bottom: 40px;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .required::after {
            content: '*';
            color: #e74c3c;
            margin-left: 4px;
        }
        
        .hint {
            font-size: 13px;
            color: #7f8c8d;
            margin-top: 5px;
            font-weight: normal;
        }
        
        .textarea-container {
            position: relative;
        }
        
        .char-counter {
            position: absolute;
            bottom: 10px;
            right: 10px;
            font-size: 12px;
            color: #95a5a6;
            background: rgba(255,255,255,0.9);
            padding: 2px 8px;
            border-radius: 10px;
        }
        
        .char-counter.warning {
            color: #f39c12;
            font-weight: bold;
        }
        
        .char-counter.error {
            color: #e74c3c;
            font-weight: bold;
        }
        
        .file-upload-area {
            border: 3px dashed #ddd;
            border-radius: 10px;
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 20px;
        }
        
        .file-upload-area:hover {
            border-color: #3498db;
            background: #f8fafc;
        }
        
        .file-upload-area.dragover {
            border-color: #3498db;
            background: #e8f4fc;
            transform: scale(1.02);
        }
        
        .upload-icon {
            font-size: 48px;
            color: #3498db;
            margin-bottom: 15px;
        }
        
        .upload-text {
            font-size: 16px;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .upload-hint {
            font-size: 14px;
            color: #7f8c8d;
        }
        
        .file-list {
            margin-top: 20px;
        }
        
        .file-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 10px;
            transition: all 0.3s;
        }
        
        .file-item:hover {
            background: #e9ecef;
        }
        
        .file-info {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
        }
        
        .file-icon {
            font-size: 20px;
            color: #3498db;
        }
        
        .file-name {
            font-weight: 500;
            color: #2c3e50;
            word-break: break-all;
        }
        
        .file-size {
            font-size: 12px;
            color: #7f8c8d;
        }
        
        .file-actions button {
            background: none;
            border: none;
            color: #e74c3c;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 5px;
            transition: background 0.3s;
        }
        
        .file-actions button:hover {
            background: rgba(231, 76, 60, 0.1);
        }
        
        .terms-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #e9ecef;
        }
        
        .terms-content {
            font-size: 14px;
            line-height: 1.6;
            color: #495057;
        }
        
        .terms-content h4 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .terms-content p {
            margin-bottom: 10px;
        }
        
        .form-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid #f0f0f0;
        }
        
        .info-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-top: 40px;
        }
        
        .info-card h3 {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .info-list {
            list-style: none;
            padding: 0;
        }
        
        .info-list li {
            margin-bottom: 10px;
            padding-left: 30px;
            position: relative;
        }
        
        .info-list li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: #4cd964;
            font-weight: bold;
        }
        
        .confirmation-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }
        
        .confirmation-content {
            background: white;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            padding: 40px;
            text-align: center;
            animation: slideUp 0.5s ease;
        }
        
        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .confirmation-icon {
            font-size: 60px;
            color: #27ae60;
            margin-bottom: 20px;
            animation: bounce 1s ease infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .case-id {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            font-family: monospace;
            font-size: 18px;
            color: #2c3e50;
            border: 2px dashed #3498db;
        }
        
        .whatsapp-button {
            background: #25D366;
            color: white;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 15px 25px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            margin-top: 20px;
            transition: all 0.3s;
        }
        
        .whatsapp-button:hover {
            background: #128C7E;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(18, 140, 126, 0.3);
        }
        
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
        }
        
        .data-summary {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .error-message {
            color: #e74c3c;
            font-size: 12px;
            margin-top: 5px;
        }
        
        @media (max-width: 768px) {
            .pedido-header {
                padding: 30px 20px;
            }
            
            .pedido-header h1 {
                font-size: 28px;
            }
            
            .form-container {
                padding: 20px;
                margin: 0 10px 40px;
            }
            
            .progress-steps {
                margin: 30px 20px;
            }
            
            .step-label {
                font-size: 12px;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .form-actions {
                flex-direction: column;
                gap: 20px;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-buttons button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Menu de Navegação -->
    <nav class="main-nav">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-balance-scale"></i>
                <span>JurisFlow</span>
            </div>
            <div class="nav-links">
                <a href="index.html"><i class="fas fa-home"></i> Início</a>
                <a href="pedido.html" class="active"><i class="fas fa-file-signature"></i> Pedir Orçamento</a>
                <a href="portal.html"><i class="fas fa-user"></i> Portal do Cliente</a>
                <a href="escritorio.html"><i class="fas fa-briefcase"></i> Área do Escritório</a>
            </div>
            <button class="nav-toggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <!-- Header -->
    <div class="pedido-header">
        <h1><i class="fas fa-file-signature"></i> Solicitar Orçamento Jurídico</h1>
        <p>Preencha o formulário abaixo para receber uma proposta personalizada para seu caso</p>
        
        <!-- Progress Steps -->
        <div class="progress-steps" id="progressSteps">
            <div class="progress-line"></div>
            <div class="progress-fill" id="progressFill"></div>
            <div class="step active">
                <div class="step-number">1</div>
                <div class="step-label">Dados Pessoais</div>
            </div>
            <div class="step">
                <div class="step-number">2</div>
                <div class="step-label">Detalhes do Caso</div>
            </div>
            <div class="step">
                <div class="step-number">3</div>
                <div class="step-label">Anexos</div>
            </div>
            <div class="step">
                <div class="step-number">4</div>
                <div class="step-label">Confirmação</div>
            </div>
        </div>
    </div>

    <div class="container">
        <main class="content">
            <form id="pedidoForm" class="form-container">
                <!-- Seção 1: Dados Pessoais -->
                <div class="form-section" id="section1">
                    <h2 class="section-title">
                        <i class="fas fa-user-circle"></i> Seus Dados
                    </h2>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="nome" class="required">
                                <i class="fas fa-user"></i> Nome Completo
                            </label>
                            <input type="text" id="nome" name="nome" class="form-control" 
                                   placeholder="Digite seu nome completo" required>
                            <div class="hint">Como consta em seus documentos</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="email" class="required">
                                <i class="fas fa-envelope"></i> E-mail
                            </label>
                            <input type="email" id="email" name="email" class="form-control" 
                                   placeholder="seu@email.com" required>
                            <div class="hint">Enviaremos a proposta para este e-mail</div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="telefone" class="required">
                                <i class="fas fa-phone"></i> Telefone
                            </label>
                            <input type="tel" id="telefone" name="telefone" class="form-control" 
                                   placeholder="(11) 99999-9999" required>
                            <div class="hint">WhatsApp para contato rápido</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="cpf">
                                <i class="fas fa-id-card"></i> CPF (opcional)
                            </label>
                            <input type="text" id="cpf" name="cpf" class="form-control" 
                                   placeholder="000.000.000-00">
                            <div class="hint">Para agilizar a formalização</div>
                        </div>
                    </div>
                    
                    <div class="nav-buttons">
                        <div></div> <!-- Espaço vazio para alinhamento -->
                        <button type="button" onclick="nextSection(2)" class="btn btn-primary">
                            Continuar <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- Seção 2: Detalhes do Caso -->
                <div class="form-section" id="section2" style="display: none;">
                    <h2 class="section-title">
                        <i class="fas fa-balance-scale"></i> Sobre seu Caso
                    </h2>
                    
                    <div class="form-group">
                        <label for="area" class="required">
                            <i class="fas fa-layer-group"></i> Área do Direito
                        </label>
                        <select id="area" name="area" class="form-control" required>
                            <option value="">Selecione uma área...</option>
                            <option value="criminal">Direito Criminal</option>
                            <option value="civel">Direito Cível</option>
                            <option value="familia">Direito de Família</option>
                            <option value="trabalhista">Direito Trabalhista</option>
                            <option value="empresarial">Direito Empresarial</option>
                            <option value="consumidor">Direito do Consumidor</option>
                            <option value="imobiliario">Direito Imobiliário</option>
                            <option value="digital">Direito Digital</option>
                            <option value="administrativo">Direito Administrativo</option>
                            <option value="contratos">Contratos</option>
                            <option value="propriedade">Propriedade Intelectual</option>
                            <option value="outros">Outros</option>
                        </select>
                        <div class="hint">Escolha a área que melhor se aplica ao seu caso</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="pedido" class="required">
                            <i class="fas fa-file-alt"></i> Descreva seu caso
                        </label>
                        <div class="textarea-container">
                            <textarea id="pedido" name="pedido" class="form-control" 
                                      rows="8" placeholder="Descreva detalhadamente seu caso, incluindo:
• Contexto e histórico
• Partes envolvidas
• O que você deseja alcançar
• Prazos importantes
• Informações relevantes" required></textarea>
                            <div class="char-counter" id="charCounter">0/5000</div>
                        </div>
                        <div class="hint">Quanto mais detalhes, mais precisa será nossa proposta</div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="valor_estimado">
                                <i class="fas fa-money-bill-wave"></i> Valor Estimado
                            </label>
                            <input type="text" id="valor_estimado" name="valor_estimado" 
                                   class="form-control" placeholder="R$ 0,00">
                            <div class="hint">Valor da causa ou contrato (opcional)</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="urgencia">
                                <i class="fas fa-clock"></i> Urgência
                            </label>
                            <select id="urgencia" name="urgencia" class="form-control">
                                <option value="normal">Normal (sem urgência)</option>
                                <option value="media">Média (até 15 dias)</option>
                                <option value="alta">Alta (até 7 dias)</option>
                                <option value="critica">Crítica (até 48h)</option>
                            </select>
                            <div class="hint">Nos ajuda a priorizar seu atendimento</div>
                        </div>
                    </div>
                    
                    <div class="nav-buttons">
                        <button type="button" onclick="prevSection(1)" class="btn btn-outline">
                            <i class="fas fa-arrow-left"></i> Voltar
                        </button>
                        <button type="button" onclick="nextSection(3)" class="btn btn-primary">
                            Continuar <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- Seção 3: Anexos -->
                <div class="form-section" id="section3" style="display: none;">
                    <h2 class="section-title">
                        <i class="fas fa-paperclip"></i> Anexos
                    </h2>
                    
                    <p style="color: #666; margin-bottom: 25px;">
                        <i class="fas fa-info-circle"></i> Anexe documentos relevantes para análise (contratos, processos, fotos, etc.)
                    </p>
                    
                    <!-- Área de Upload -->
                    <div class="file-upload-area" id="uploadArea">
                        <div class="upload-icon">
                            <i class="fas fa-cloud-upload-alt"></i>
                        </div>
                        <div class="upload-text">
                            Arraste seus arquivos aqui ou clique para selecionar
                        </div>
                        <div class="upload-hint">
                            PDF, DOC, DOCX, JPG, PNG (Máx. 10MB por arquivo)
                        </div>
                        <input type="file" id="fileInput" multiple 
                               accept=".pdf,.doc,.docx,.jpg,.jpeg,.png" 
                               style="display: none;">
                    </div>
                    
                    <!-- Lista de Arquivos -->
                    <div class="file-list" id="fileList"></div>
                    
                    <div class="nav-buttons">
                        <button type="button" onclick="prevSection(2)" class="btn btn-outline">
                            <i class="fas fa-arrow-left"></i> Voltar
                        </button>
                        <button type="button" onclick="nextSection(4)" class="btn btn-primary">
                            Continuar <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- Seção 4: Confirmação -->
                <div class="form-section" id="section4" style="display: none;">
                    <h2 class="section-title">
                        <i class="fas fa-check-circle"></i> Confirmação
                    </h2>
                    
                    <!-- Resumo dos Dados -->
                    <div class="data-summary">
                        <h3 style="color: #2c3e50; margin-bottom: 20px;">
                            <i class="fas fa-list"></i> Resumo do seu Pedido
                        </h3>
                        
                        <div id="summaryContent">
                            <!-- Resumo será gerado aqui -->
                        </div>
                    </div>
                    
                    <!-- Termos e Condições -->
                    <div class="form-group">
                        <label style="display: block; margin-bottom: 15px;">
                            <strong><i class="fas fa-file-contract"></i> Termos e Condições</strong>
                        </label>
                        
                        <div class="terms-box">
                            <div class="terms-content">
                                <h4>1. Aceitação dos Termos</h4>
                                <p>Ao enviar este formulário, você concorda que:</p>
                                <p>• Todas as informações fornecidas são verdadeiras;</p>
                                <p>• Esta é apenas uma solicitação de orçamento, não constituindo contratação;</p>
                                <p>• Analisaremos seu caso e retornaremos com uma proposta em até 24 horas úteis;</p>
                                <p>• Seus dados serão usados apenas para análise do caso e contato.</p>
                                
                                <h4>2. Proteção de Dados</h4>
                                <p>Seus dados são armazenados com segurança e não serão compartilhados com terceiros sem sua autorização, exceto quando exigido por lei.</p>
                                
                                <h4>3. Sigilo Profissional</h4>
                                <p>Todas as informações fornecidas são protegidas pelo sigilo profissional entre advogado e cliente.</p>
                            </div>
                        </div>
                        
                        <label style="display: flex; align-items: flex-start; gap: 10px; margin-top: 15px;">
                            <input type="checkbox" id="termos" name="termos" required style="margin-top: 3px;">
                            <span>
                                Li e concordo com os <strong>Termos e Condições</strong> acima
                                <span class="required"></span>
                            </span>
                        </label>
                    </div>
                    
                    <!-- Newsletter -->
                    <div class="form-group">
                        <label style="display: flex; align-items: flex-start; gap: 10px;">
                            <input type="checkbox" id="newsletter" name="newsletter" checked style="margin-top: 3px;">
                            <span>
                                Desejo receber atualizações sobre meu caso e conteúdos jurídicos por e-mail
                            </span>
                        </label>
                    </div>
                    
                    <div class="nav-buttons">
                        <button type="button" onclick="prevSection(3)" class="btn btn-outline">
                            <i class="fas fa-arrow-left"></i> Voltar
                        </button>
                        <button type="submit" class="btn btn-success" style="padding: 15px 30px;">
                            <i class="fas fa-paper-plane"></i> Enviar Pedido
                        </button>
                    </div>
                </div>
            </form>
            
            <!-- Cartão de Informações -->
            <div class="info-card">
                <h3><i class="fas fa-shield-alt"></i> Por que escolher nosso escritório?</h3>
                <ul class="info-list">
                    <li><strong>Resposta em até 24 horas</strong> - Mesmo em finais de semana</li>
                    <li><strong>Sigilo garantido</strong> - Todas as informações são confidenciais</li>
                    <li><strong>Orçamento sem compromisso</strong> - Avaliação gratuita do seu caso</li>
                    <li><strong>Especialistas dedicados</strong> - Advogados especializados por área</li>
                    <li><strong>Acompanhamento online</strong> - Acesse seu caso a qualquer momento</li>
                </ul>
            </div>
        </main>
    </div>

    <!-- Modal de Confirmação -->
    <div class="confirmation-modal" id="confirmationModal">
        <div class="confirmation-content">
            <div class="confirmation-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h2 style="color: #2c3e50; margin-bottom: 15px;">Pedido Enviado com Sucesso!</h2>
            <p style="color: #666; margin-bottom: 20px;">
                Recebemos sua solicitação. Em até <strong>24 horas úteis</strong> você receberá nossa proposta.
            </p>
            
            <div class="case-id" id="generatedId">SOL-XXXXXX</div>
            
            <p style="color: #666; margin-bottom: 25px;">
                <i class="fas fa-info-circle"></i> Guarde este ID para acompanhar seu pedido
            </p>
            
            <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                <a href="index.html" class="btn btn-primary">
                    <i class="fas fa-home"></i> Voltar ao Início
                </a>
                <a href="portal.html" class="btn btn-success">
                    <i class="fas fa-user-circle"></i> Acessar Portal
                </a>
                <a href="#" class="whatsapp-button" id="whatsappBtn">
                    <i class="fab fa-whatsapp"></i> Falar no WhatsApp
                </a>
            </div>
            
            <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee;">
                <p style="font-size: 14px; color: #95a5a6;">
                    <i class="fas fa-envelope"></i> Enviamos uma confirmação para seu e-mail
                </p>
            </div>
        </div>
    </div>

    <script src="scripts/database.js"></script>
    <script src="scripts/status-config.js"></script>
    
    <script>
        // Controle das seções
        let currentSection = 1;
        let uploadedFiles = [];
        
        // Função para mostrar seção
        function showSection(sectionNumber) {
            // Esconder todas as seções
            document.querySelectorAll('.form-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // Mostrar seção atual
            document.getElementById('section' + sectionNumber).style.display = 'block';
            
            // Atualizar progresso
            updateProgress(sectionNumber);
            
            // Atualizar resumo na última seção
            if (sectionNumber === 4) {
                updateSummary();
            }
        }
        
        // Função para avançar seção
        function nextSection(next) {
            // Validar seção atual antes de avançar
            if (!validateCurrentSection()) {
                return;
            }
            
            currentSection = next;
            showSection(next);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // Função para voltar seção
        function prevSection(prev) {
            currentSection = prev;
            showSection(prev);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // Atualizar barra de progresso
        function updateProgress(sectionNumber) {
            const progressFill = document.getElementById('progressFill');
            if (progressFill) {
                const progress = ((sectionNumber - 1) / 3) * 100;
                progressFill.style.width = `${progress}%`;
            }
            
            // Atualizar visual dos passos
            document.querySelectorAll('.step').forEach((step, index) => {
                if (index + 1 <= sectionNumber) {
                    step.classList.add('active');
                } else {
                    step.classList.remove('active');
                }
            });
        }
        
        // Validar seção atual
        function validateCurrentSection() {
            const section = document.getElementById('section' + currentSection);
            const requiredFields = section.querySelectorAll('[required]');
            let isValid = true;
            
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    field.classList.add('error');
                    isValid = false;
                    
                    // Adicionar mensagem de erro
                    if (!field.nextElementSibling || !field.nextElementSibling.classList.contains('error-message')) {
                        const errorDiv = document.createElement('div');
                        errorDiv.className = 'error-message';
                        errorDiv.textContent = 'Este campo é obrigatório';
                        errorDiv.style.color = '#e74c3c';
                        errorDiv.style.fontSize = '12px';
                        errorDiv.style.marginTop = '5px';
                        field.parentNode.insertBefore(errorDiv, field.nextSibling);
                    }
                } else {
                    field.classList.remove('error');
                    // Remover mensagem de erro se existir
                    const errorMsg = field.nextElementSibling;
                    if (errorMsg && errorMsg.classList.contains('error-message')) {
                        errorMsg.remove();
                    }
                }
            });
            
            return isValid;
        }
        
        // Contador de caracteres
        function setupCharCounter() {
            const textarea = document.getElementById('pedido');
            const counter = document.getElementById('charCounter');
            
            textarea.addEventListener('input', function() {
                const count = this.value.length;
                counter.textContent = `${count}/5000`;
                
                if (count > 4500) {
                    counter.className = 'char-counter warning';
                } else if (count > 5000) {
                    counter.className = 'char-counter error';
                    this.value = this.value.substring(0, 5000);
                } else {
                    counter.className = 'char-counter';
                }
            });
        }
        
        // Sistema de upload de arquivos
        function setupFileUpload() {
            const uploadArea = document.getElementById('uploadArea');
            const fileInput = document.getElementById('fileInput');
            const fileList = document.getElementById('fileList');
            
            // Clique na área de upload
            uploadArea.addEventListener('click', () => {
                fileInput.click();
            });
            
            // Arrastar e soltar
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('dragover');
            });
            
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('dragover');
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
                handleFiles(e.dataTransfer.files);
            });
            
            // Seleção de arquivos
            fileInput.addEventListener('change', (e) => {
                handleFiles(e.target.files);
            });
            
            // Manipular arquivos
            function handleFiles(files) {
                for (let file of files) {
                    if (file.size > 10 * 1024 * 1024) {
                        alert(`Arquivo ${file.name} excede o limite de 10MB`);
                        continue;
                    }
                    
                    const fileItem = {
                        id: Date.now() + Math.random(),
                        name: file.name,
                        size: formatFileSize(file.size),
                        file: file
                    };
                    
                    uploadedFiles.push(fileItem);
                    renderFileList();
                }
                
                fileInput.value = '';
            }
            
            // Renderizar lista de arquivos
            function renderFileList() {
                fileList.innerHTML = uploadedFiles.map(file => `
                    <div class="file-item" data-id="${file.id}">
                        <div class="file-info">
                            <div class="file-icon">
                                <i class="fas fa-file-pdf"></i>
                            </div>
                            <div>
                                <div class="file-name">${file.name}</div>
                                <div class="file-size">${file.size}</div>
                            </div>
                        </div>
                        <div class="file-actions">
                            <button onclick="removeFile('${file.id}')" title="Remover arquivo">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `).join('');
            }
            
            // Formatar tamanho do arquivo
            function formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }
        }
        
        // Remover arquivo
        function removeFile(fileId) {
            uploadedFiles = uploadedFiles.filter(file => file.id != fileId);
            document.getElementById('fileList').innerHTML = uploadedFiles.map(file => `
                <div class="file-item" data-id="${file.id}">
                    <div class="file-info">
                        <div class="file-icon">
                            <i class="fas fa-file-pdf"></i>
                        </div>
                        <div>
                            <div class="file-name">${file.name}</div>
                            <div class="file-size">${file.size}</div>
                        </div>
                    </div>
                    <div class="file-actions">
                        <button onclick="removeFile('${file.id}')" title="Remover arquivo">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }
        
        // Gerar resumo do pedido
        function updateSummary() {
            const summary = document.getElementById('summaryContent');
            
            // Coletar dados do formulário
            const formData = {
                nome: document.getElementById('nome').value,
                email: document.getElementById('email').value,
                telefone: document.getElementById('telefone').value,
                cpf: document.getElementById('cpf').value || 'Não informado',
                area: document.getElementById('area').options[document.getElementById('area').selectedIndex].text,
                urgencia: document.getElementById('urgencia').options[document.getElementById('urgencia').selectedIndex].text,
                valor_estimado: document.getElementById('valor_estimado').value || 'Não informado',
                pedido: document.getElementById('pedido').value.substring(0, 300) + (document.getElementById('pedido').value.length > 300 ? '...' : '')
            };
            
            const fileCount = uploadedFiles.length;
            
            summary.innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <div>
                        <strong><i class="fas fa-user"></i> Nome:</strong>
                        <div>${formData.nome}</div>
                    </div>
                    <div>
                        <strong><i class="fas fa-envelope"></i> E-mail:</strong>
                        <div>${formData.email}</div>
                    </div>
                    <div>
                        <strong><i class="fas fa-phone"></i> Telefone:</strong>
                        <div>${formData.telefone}</div>
                    </div>
                    <div>
                        <strong><i class="fas fa-id-card"></i> CPF:</strong>
                        <div>${formData.cpf}</div>
                    </div>
                    <div>
                        <strong><i class="fas fa-layer-group"></i> Área:</strong>
                        <div>${formData.area}</div>
                    </div>
                    <div>
                        <strong><i class="fas fa-clock"></i> Urgência:</strong>
                        <div>${formData.urgencia}</div>
                    </div>
                    <div>
                        <strong><i class="fas fa-money-bill-wave"></i> Valor Estimado:</strong>
                        <div>${formData.valor_estimado}</div>
                    </div>
                    <div style="grid-column: span 2;">
                        <strong><i class="fas fa-file-alt"></i> Descrição:</strong>
                        <div style="max-height: 150px; overflow-y: auto; padding: 10px; background: white; border-radius: 5px; margin-top: 5px;">
                            ${formData.pedido.replace(/\n/g, '<br>')}
                        </div>
                    </div>
                    <div>
                        <strong><i class="fas fa-paperclip"></i> Anexos:</strong>
                        <div>${fileCount} arquivo(s)</div>
                    </div>
                </div>
            `;
        }
        
        // Aplicar máscaras aos campos
        function setupMasks() {
            // Máscara de CPF
            const cpfInput = document.getElementById('cpf');
            if (cpfInput) {
                cpfInput.addEventListener('input', function(e) {
                    let value = e.target.value.replace(/\D/g, '');
                    if (value.length > 11) value = value.substring(0, 11);
                    
                    if (value.length <= 11) {
                        value = value.replace(/(\d{3})(\d)/, '$1.$2');
                        value = value.replace(/(\d{3})(\d)/, '$1.$2');
                        value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
                    }
                    
                    e.target.value = value;
                });
            }
            
            // Máscara de telefone
            const telefoneInput = document.getElementById('telefone');
            if (telefoneInput) {
                telefoneInput.addEventListener('input', function(e) {
                    let value = e.target.value.replace(/\D/g, '');
                    
                    if (value.length > 11) value = value.substring(0, 11);
                    
                    if (value.length === 11) {
                        value = value.replace(/^(\d{2})(\d{5})(\d{4})$/, '($1) $2-$3');
                    } else if (value.length === 10) {
                        value = value.replace(/^(\d{2})(\d{4})(\d{4})$/, '($1) $2-$3');
                    } else if (value.length > 6) {
                        value = value.replace(/^(\d{2})(\d{4})(\d{0,4})$/, '($1) $2-$3');
                    } else if (value.length > 2) {
                        value = value.replace(/^(\d{2})(\d{0,5})$/, '($1) $2');
                    } else if (value.length > 0) {
                        value = value.replace(/^(\d*)$/, '($1');
                    }
                    
                    e.target.value = value;
                });
            }
            
            // Máscara de valor
            const valorInput = document.getElementById('valor_estimado');
            if (valorInput) {
                valorInput.addEventListener('input', function(e) {
                    let value = e.target.value.replace(/\D/g, '');
                    value = (value / 100).toFixed(2) + '';
                    value = value.replace(".", ",");
                    value = value.replace(/(\d)(\d{3})(\d{3}),/g, "$1.$2.$3,");
                    value = value.replace(/(\d)(\d{3}),/g, "$1.$2,");
                    
                    if (value === '0,00') {
                        e.target.value = '';
                    } else {
                        e.target.value = 'R$ ' + value;
                    }
                });
            }
        }
        
        // Submissão do formulário
        function setupFormSubmission() {
            document.getElementById('pedidoForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Validar seção atual
                if (!validateCurrentSection()) {
                    return;
                }
                
                // Validar termos
                if (!document.getElementById('termos').checked) {
                    alert('Por favor, aceite os termos e condições para continuar.');
                    return;
                }
                
                // Coletar dados do formulário
                const formData = {
                    nome: document.getElementById('nome').value,
                    email: document.getElementById('email').value,
                    telefone: document.getElementById('telefone').value,
                    cpf: document.getElementById('cpf').value,
                    area: document.getElementById('area').value,
                    pedido: document.getElementById('pedido').value,
                    valor_estimado: document.getElementById('valor_estimado').value,
                    urgencia: document.getElementById('urgencia').value,
                    newsletter: document.getElementById('newsletter').checked,
                    urgente: document.getElementById('urgencia').value === 'critica' || 
                             document.getElementById('urgencia').value === 'alta'
                };
                
                try {
                    // Registrar cliente
                    const cliente = JurisFlowDB.registerClient({
                        nome: formData.nome,
                        email: formData.email,
                        telefone: formData.telefone,
                        cpf: formData.cpf,
                        newsletter: formData.newsletter
                    });
                    
                    // Adicionar caso ao banco de dados
                    const novoCaso = JurisFlowDB.addCase({
                        cliente_id: cliente.id,
                        nome: formData.nome,
                        email: formData.email,
                        telefone: formData.telefone,
                        area: formData.area,
                        pedido: formData.pedido,
                        valor_estimado: formData.valor_estimado,
                        urgencia: formData.urgencia,
                        anexos: uploadedFiles.length,
                        urgente: formData.urgente
                    });
                    
                    // Configurar modal de confirmação
                    setupConfirmationModal(novoCaso);
                    
                    // Mostrar modal
                    document.getElementById('confirmationModal').style.display = 'flex';
                    
                    // Limpar formulário após 10 segundos
                    setTimeout(() => {
                        resetForm();
                    }, 10000);
                    
                } catch (error) {
                    console.error('Erro ao enviar pedido:', error);
                    alert('Erro ao enviar pedido. Por favor, tente novamente.');
                }
            });
        }
        
        // Configurar modal de confirmação
        function setupConfirmationModal(caso) {
            document.getElementById('generatedId').textContent = caso.id;
            
            // Configurar link do WhatsApp
            const whatsappMsg = `Olá! Acabei de enviar um pedido de orçamento (ID: ${caso.id}) no JurisFlow. Gostaria de mais informações.`;
            const whatsappUrl = `https://wa.me/5511999999999?text=${encodeURIComponent(whatsappMsg)}`;
            document.getElementById('whatsappBtn').href = whatsappUrl;
            
            // Fechar modal ao clicar fora
            document.getElementById('confirmationModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    this.style.display = 'none';
                    resetForm();
                }
            });
        }
        
        // Resetar formulário
        function resetForm() {
            document.getElementById('pedidoForm').reset();
            uploadedFiles = [];
            document.getElementById('fileList').innerHTML = '';
            currentSection = 1;
            showSection(1);
            updateProgress(1);
        }
        
        // Inicializar tudo quando o DOM estiver carregado
        document.addEventListener('DOMContentLoaded', function() {
            // Inicializar seções
            showSection(1);
            
            // Configurar funcionalidades
            setupCharCounter();
            setupFileUpload();
            setupMasks();
            setupFormSubmission();
            
            // Menu responsivo
            document.querySelector('.nav-toggle').addEventListener('click', function() {
                document.querySelector('.nav-links').classList.toggle('show');
            });
        });
    </script>
</body>
</html>